<html>
    <head>
        <script src="../widget/radical-widget.js"></script>
    </head>
    <body>
        <textarea rows="20" cols="200"></textarea>
    </body>
    <script>
        function download(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/javascript;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);

            element.style.display = 'none';
            document.body.appendChild(element);

            element.click();

            document.body.removeChild(element);
        }


        var tarea = document.getElementsByTagName("textarea")[0];
        var script = "var [Name]_Widget_Definition = " + JSON.stringify(RadicalWidget.prototype,null,4) + ";\n";
        script += "var [Name]_Widget_JSON = JSON.stringify([Name]_Widget_Definition);\n"
        script += "function [Name]_OnWidgetLoad(widget, context){\n\
            widget.Primitive = document.createElement('div');\n\
            widget.Primitive.id = widget.InstanceID;\n\
            widget.EventPrimitive = widget.Primitive;\n\
            if(typeof context !== 'undefined'){\n\
                context.appendChild(widget.Primitive);\n\
            }\n\
        }\n";
        script += "function [Name]_OnWidgetAddChild(widget, context, child){return true;}\n";
        script += "function [Name]_OnWidgetRemoveChild(widget, context, child){return true;}\n";
        script += "function [Name]_OnWidgetPropertyChange(widget, context, property){return true;}\n";
        script += "function [Name]_OnWidgetSetEnabled(widget, context, enable){return true;}\n";
        script += "function [Name]_OnWidgetGetEnabled(widget, context){return true;}\n";
        script += "function [Name]_OnWidgetSetVisible(widget, context, visible){}\n";
        script += "function [Name]_OnWidgetGetVisible(widget, context){return true;}\n";
        script += "function [Name]_OnWidgetGetValue(widget, context){return null;}\n";
        script += "function [Name]_OnWidgetSetValue(widget, context, value){}\n";
        tarea.value = script;
        download("widget-template.js", script);
    </script>
</html>